pdfMerge:
  # ===== PAYLOAD ENRICHERS =====
  enrichers:
    - enrollmentContext    # Extracts product, market, state context
    - coverageSummary      # Extracts coverage calculations
  
  settings:
    addBookmarks: true
    pageNumbering: "continuous"
  
  # ===== HEADER CONFIGURATION =====
  header:
    enabled: true
    height: 50
    startPage: 2
    content:
      left:
        text: "{enrollmentContext.marketDisplay} Enrollment"
        font: "Helvetica"
        fontSize: 10
      center:
        text: "{enrollmentContext.stateFullName} | Products: {enrollmentContext.productsDisplay}"
        font: "Helvetica-Bold"
        fontSize: 10
      right:
        text: "Application: {applicationNumber}"
        font: "Helvetica"
        fontSize: 10
    border:
      enabled: true
      color: "#003366"
      thickness: 1
  
  # ===== FOOTER CONFIGURATION =====
  footer:
    enabled: true
    height: 40
    startPage: 1
    content:
      left:
        text: "State: {enrollmentContext.state}"
        font: "Helvetica-Oblique"
        fontSize: 8
      center:
        text: "Page {current} of {total}"
        font: "Helvetica-Bold"
        fontSize: 10
      right:
        text: "Â© 2025 {companyInfo.name}"
        font: "Helvetica"
        fontSize: 8
    border:
      enabled: false
      color: "#CCCCCC"
      thickness: 1
  
  sections:
    # Page 1: Enrollment Cover with Product Summary
    - name: "enrollment-cover"
      type: "freemarker"
      template: "templates/enrollment-cover.ftl"
      enabled: true
      
    # Page 2: AcroForm - Primary Application
    - name: "enrollment-form"
      type: "acroform"
      template: "templates/enrollment-form-base.pdf"
      enabled: true
      fieldMapping:
        "ApplicationNumber": "applicationNumber"
        "EffectiveDate": "enrollmentContext.effectiveDate"
        "SubmittedDate": "enrollmentContext.submittedDate"
        "TotalPremium": "coverageSummary.totalPremium"
        "Primary_FirstName": "applicants[relationship=PRIMARY].firstName"
        "Primary_LastName": "applicants[relationship=PRIMARY].lastName"
        "Primary_DateOfBirth": "applicants[relationship=PRIMARY].dateOfBirth"

    # Page 3: PDFBox - Coverage Summary with Enriched Data
    - name: "coverage-summary"
      type: "pdfbox"
      template: "CoverageSummaryGenerator"
      enabled: true

    # Page 4: Terms and Conditions
    - name: "terms"
      type: "freemarker"
      template: "templates/terms-and-conditions.ftl"
      enabled: true

  bookmarks:
    - title: "Enrollment Application"
      page: 1
    - title: "Application Form"
      page: 2
    - title: "Coverage Summary"
      page: 3
    - title: "Terms and Conditions"
      page: 4
